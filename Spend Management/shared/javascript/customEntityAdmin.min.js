function addModalControlFocusOnShowOrHideEvent(n,t,i){i?$f(n).add_shown(function(){$g(t).focus()}):$f(n).add_hiding(function(){try{$g(t).focus()}catch(n){}})}function closeOpenModal(){var n=SEL.CustomEntityAdministration,t=n.DomIDs;if($g(pnlMasterPopupid).style.display==""){SEL.MasterPopup.HideMasterPopup();return}if($("#ui-datepicker-div").length!=0&&$("#ui-datepicker-div").css("display")!="none"){$("#ui-datepicker-div").fadeOut(100);return}if($("#ui-timepicker-div").length!=0&&$("#ui-timepicker-div").css("display")!="none"){$("#ui-timepicker-div").fadeOut(100);return}if($g(SEL.Trees.DomIDs.Filters.Panel).style.display==""){$.filterModal.Filters.FilterModal.Cancel();return}if($g(t.Attributes.Relationship.NtoOne.Modal.Fields.MatchFieldSelector.Modal.Panel).style.display==""){n.Attributes.Relationship.ManyToOne.FieldItem.Modal.Close();return}if($g(pnllistitemid).style.display==""){hideListItemModal();return}if($g(pnltabid).style.display==""){n.Forms.HideTabModal();return}if($g(pnlsectionid).style.display==""){n.Forms.HideSectionModal();return}if($g(pnlfieldid).style.display==""){n.Forms.HideFieldLabelModal();return}if($g(t.Attributes.Relationship.NtoOne.Modal.Panel).style.display==""){SEL.CustomEntityAdministration.Attributes.Relationship.ManyToOne.Modal.Close();return}if($g(t.Attributes.Relationship.OnetoN.Modal.Panel).style.display==""){SEL.CustomEntityAdministration.Attributes.Relationship.OneToMany.Modal.Close();return}if($g(t.Attributes.Summary.Modal.DisplayFieldModal.Panel).style.display==""){n.Attributes.Summary.DisplayField.Modal.Hide();return}if($g(t.Attributes.Summary.Modal.Panel).style.display==""){n.Attributes.Summary.Modal.Hide();return}if($g(pnladdattributeid).style.display==""){closeAttributeModal();return}if($("#"+t.Views.Modal.General.FormSelectionMappings.Panel+":visible").length){SEL.CustomEntityAdministration.Views.General.FormSelectionMappings.Cancel();return}if($g(pnlviewid).style.display==""){$f(modviewid).hide();return}if($g("pnlDefaultText").style.display==""){n.Forms.HideDefaultTextModal();return}if($g(pnlactualformID).style.display==""){n.Forms.HideFormModal();return}if($g(pnlcopyformID).style.display==""){n.Forms.HideCopyModal();return}}function FireDropdownValidatorWhenNoneSelected(n,t){var r=$g(n),i=$g(t);i.isvalid=!0;r.selectedIndex===0&&(i.isvalid=!1);ValidatorUpdateDisplay(i)}function WebServiceError(n){SEL.MasterPopup.ShowMasterPopup('An error has occurred processing your request.<span style="display:none;">'+(n._message?n._message:n)+"<\/span>","Message from "+moduleNameHTML)}function ValidateListBox(n,t){var i=document.getElementById(listbox_tovalidate).options;t.IsValid=i.length>0?!0:!1}function CancelEntity(){document.location="custom_entities.aspx"}function setCurrencyListState(){$g(ddlDefaultCurrencyID).disabled=$g(chkEnableCurrenciesID).checked?!1:!0}function setMonetaryState(){if($e(chkEnableCurrenciesID)===!0&&$e(ddlDefaultCurrencyID)===!0){var n=$g(chkEnableCurrenciesID),t=$g(ddlDefaultCurrencyID);n!==null&&t!==null&&(n.disabled=!1,n.checked?(n.disabled=!0,t.disabled=!1):(entityid!==0&&(n.disabled=!0),t.disabled=!0))}}function updateCurrenciesValidator(n){var t=$("#"+lblDefaultCurrencyID);$g(chkEnableCurrenciesID).checked?(t.css("font-weight","bold"),t.html(t.html()+"*")):(t.css("font-weight",""),n===!1&&t.html(t.html().substring(0,t.html().length-1)),ValidatorEnable(document.getElementById(cvDefaultCurrencyID),!1))}function ValidateAttributeDisplayName(n,t){t.IsValid=$g(txtattributenameid).value.replace(/^\s+/,"").toLowerCase().replace(" ","")=="greenlightcurrency"?!1:!0}function showAttributeModal(){if(entityid==0){currentAction="addAttribute";SEL.CustomEntityAdministration.Base.Save();shallowSavePerformed=!0;return}SEL.Common.ShowModal(modattributeid);$("#"+txtattributenameid).select()}function saveAttribute(){var o,g,s,nt,r,h;if(EnableAttributeValidators("normal"),validateform("vgAttribute")!=!1){var i,c=$g(txtattributenameid).value,tt=$g(txtattributedescriptionid).value,it=$g(txtattributetooltipid).value,rt=$g(chkattributemandatoryid).checked,ut=$g(chkDisplayInMobile).checked,l=$g(cmbattributetypeid),t=l.options[l.selectedIndex].value,n=1,a=0,u="",f=null,v=0,y="",ft=$g(auditidentifierid).checked,p=$g(isuniqueid).checked,w=$g(encrypt).checked,b=$g(cmbDisplayWidthID),k=b.options[b.selectedIndex].value,e=!1,d=$("#"+chkattributebuiltinid).is(":checked");i=null;o=!1;switch(t){case"1":$g(txtmaxlengthid).value!=""&&(i=$g(txtmaxlengthid).value);case"16":$g(txtmaxlengthlargeid).value!=""&&(i=$g(txtmaxlengthlargeid).value);n=$g(cmbtextformatid).options[$g(cmbtextformatid).selectedIndex].value;t=="1"&&k=="2"&&(n="7");break;case"4":case"17":if(g=$g(lstitemsid),s=$("#"+lstitemsid).data(lstitemsid),g!=null&&$e("txtlistitems"))for(nt=$g("txtlistitems"),nt.value="",f=[],r=0;r<s.length;r++)f[r]=JSON.stringify(s[r]);t=="4"&&(n=k=="1"?"8":"9");break;case"5":u=$g(cmbdefaultvalueid).options[$g(cmbdefaultvalueid).selectedIndex].value;o=shallowSavePerformed&&attributeid===0?!0:attributeid===0&&p===!1&&confirm('Would you like to populate any existing records for this GreenLight with the default value of "'+u+'" for this new attribute?');break;case"3":n=$g(cmbdateformatid).options[$g(cmbdateformatid).selectedIndex].value;break;case"7":a=$g(txtprecisionid).value;break;case"10":$g(txtmaxlengthlargeid).value!=""?i=$g(txtmaxlengthlargeid).value:e=$("#"+chkRemoveFont)[0].checked;n=$g(cmbtextformatlargeid).options[$g(cmbtextformatlargeid).selectedIndex].value;break;case"11":v=$g(cmbattributeworkflowid).options[$g(cmbattributeworkflowid).selectedIndex].value;break;case"19":y=$g(txtAdviceText).value;break;case"22":n="1";e=$("#chkImageLibrary")[0].checked;break;case"23":n=$g(cmbcontactformatid).options[$g(cmbcontactformatid).selectedIndex].value}h=function(){Spend_Management.svcCustomEntities.saveAttribute(CurrentUserInfo.AccountID,employeeid,entityid,attributeid,c,tt,it,rt,t,i,n,u,a,f,v,y,ft,p,o,ut,e,d,w,function(i){i[0]===-1?SEL.MasterPopup.ShowMasterPopup("An attribute or relationship with this Display name already exists.","Message from "+moduleNameHTML):(i[1]==="1"&&(document.getElementById(hdnAuditAttributeID).value=i[0],document.getElementById(hdnAuditAttributeDisplayNameID).value=i[2]),closeAttributeModal(),Spend_Management.svcCustomEntities.getAttributesGrid(entityid,RefreshAttributeGridComplete),(t==="1"&&(n==="1"||n==="7")||t==="4")&&SEL.CustomEntityAdministration.Base.AddFormSelectionAttribute(c,i[0]),d&&!$("#ctl00_contentmain_chkBuiltIn").is(":checked")&&$("#ctl00_contentmain_chkBuiltIn").prop("checked",!0).prop("disabled",!0))},WebServiceError)};editMode&&!attributeEncrypted&&w?SEL.MasterPopup.ShowMasterConfirm("The 'Encrypt' option is irreversible. Once activated, all data stored for this attribute will be encrypted. Are you sure you want to continue?","Message from "+moduleNameHTML,h,function(){},"encrypt"):h()}}function closeAttributeModal(){SEL.CustomEntityAdministration.Base.RemoveAllShortCuts();SEL.Common.HideModal(modattributeid);$("#divtooltip").css("display","")}function RefreshAttributeGridComplete(n){$e(pnlAttributeID)===!0&&($g(pnlAttributeID).innerHTML=n[1],SEL.Grid.updateGrid(n[0]));return}function ConfirmAuditIdentifierChange(){var r=$g(hdnAuditAttributeID),n=$g(hdnAuditAttributeDisplayNameID),t=$g(auditidentifierid),i;return t.checked&&r.value!=attributeid&&n.value!="id"?(i=confirm("Are you sure you want to change the audit identifier for this GreenLight? The current identifier is: "+n.value),i?(t.disabled=!0,!0):!1):!0}function deleteAttribute(n,t){var r=$g(hdnAuditAttributeID).value,u=$g(hdnAuditAttributeDisplayNameID).value,i="Are you sure you wish to delete the selected attribute?";t!==15&&(i+="\n\nPlease note once this attribute has been deleted, ALL DATA entered by users for this attribute will be permanently deleted and cannot be retrieved.\n\nThis action is NOT reversible.");n==r&&(i+=" This attribute is currently the audit identifier, deleting this attribute will reset the identifier to the id attribute.");confirm(i)&&Spend_Management.svcCustomEntities.deleteAttribute(n,entityid,CurrentUserInfo.AccountID,deleteAttributeComplete,WebServiceError)}function deleteAttributeComplete(n){switch(n[2]){case-1:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is used as a display field or lookup display field in a n:1 relationship attribute.","Message from "+moduleNameHTML);break;case-2:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is used as a look-up field in a n:1 relationship attribute.","Message from "+moduleNameHTML);break;case-4:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is used as a display field in a user defined relationship.","Message from "+moduleNameHTML);break;case-5:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is used as a search field in a user defined relationship.","Message from "+moduleNameHTML);break;case-6:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is used as a search or display field.","Message from "+moduleNameHTML);break;case-7:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is used in a report as a column or filter.","Message from "+moduleNameHTML);break;case-8:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is used in a view's form selection mappings.","Message from "+moduleNameHTML);break;case-9:SEL.MasterPopup.ShowMasterPopup("The attribute cannot be deleted as it is a system attribute.","Message from "+moduleNameHTML);break;default:var t=$g(hdnAuditAttributeID),i=$g(hdnAuditAttributeDisplayNameID);n[0]==t.value&&(t.value=n[1],i.value="id");SEL.CustomEntityAdministration.Base.DeleteFormSelectionAttribute(n[0]);Spend_Management.svcCustomEntities.getAttributesGrid(entityid,RefreshAttributeGridComplete,WebServiceError)}return}function NewAttribute(){$g("divAttributeSectionHeader").innerHTML="New Attribute";attributeid=0;SEL.CustomEntityAdministration.IDs.Attribute=0;clearAttributeForm();showAttributeModal();editMode=!1;attributeEncrypted=!1}function editAttribute(n,t,i){SEL.CustomEntityAdministration.ParentFilter.IsParentFilter=i;attributeid=n;SEL.CustomEntityAdministration.IDs.Attribute=n;switch(t){case 4:if(SEL.CustomEntityAdministration.Attributes.IsFormSelectionAttribute(n)&&!confirm("This Attribute is currently assigned as a Form Selection Attribute.\n\nPlease note that any Form Selection Attribute mappings will be automatically deleted if you delete a related list item."))return;getAttribute(n);break;case 9:$g(SEL.CustomEntityAdministration.DomIDs.Attributes.Relationship.NtoOne.Modal.General.RelationshipEntity).disabled=!0;$g(SEL.CustomEntityAdministration.DomIDs.Attributes.Relationship.OnetoN.Modal.General.RelationshipEntity).disabled=!0;SEL.CustomEntityAdministration.Attributes.Relationship.Get(n,sessionStorage.getItem("formIdforN1"));break;case 15:SEL.CustomEntityAdministration.Attributes.Summary.Edit(n);break;case 19:$("#divtooltip").css("display","none");getAttribute(n);break;default:getAttribute(n)}}function clearAttributeForm(){SEL.Common.Page_ClientValidateReset();clearBasicAttributeDetails();clearAdvancedAttributeDetails();showFurtherAttributeOptions();ToggleMaxLengthDropDown();ShowDisplayWidthOptions("text",!1)}function clearBasicAttributeDetails(){var n,t;$g(txtattributenameid).value="";$g(txtattributedescriptionid).value="";$g(txtattributetooltipid).value="";$g(chkattributemandatoryid).checked=!1;$g(chkDisplayInMobile).checked=!1;$g(chkattributebuiltinid).checked=!1;$g(chkattributebuiltinid).disabled=!CurrentUserInfo.AdminOverride;$g(cmbattributetypeid).disabled=!1;n=$g(auditidentifierid);n.checked=!1;n.disabled=!1;t=$g(isuniqueid);t.checked=!1;t.disabled=!1;$g(cmbattributetypeid).selectedIndex=0;$g(chkattributemandatoryid).disabled=!1;$("#"+txtmaxlengthid).css("display","");$("#"+encrypt).prop("checked",!1)}function clearAdvancedAttributeDetails(){var f=$g(txtmaxlengthid),n,t,i,r,u;f.value="";f.disabled=!1;n=$g(txtmaxlengthlargeid);n.value="";n.disabled=!1;t=$g(txtprecisionid);t.value="";t.disabled=!1;$g(cmbtextformatid).selectedIndex=0;$g(cmbtextformatid).disabled=!1;$g(cmbdefaultvalueid).selectedIndex=0;$g(lstitemsid).options.length=0;$g(txtAdviceText).value="";$g(cmbDisplayWidthID).selectedIndex=0;$g(txtAdviceText).value="";i=$g(cmbdateformatid);i.selectedIndex=0;i.disabled=!1;r=$g(cmbtextformatlargeid);r.selectedIndex=0;r.disabled=!1;u=$g(cmbcontactformatid);u.selectedIndex=0;u.disabled=!1;$("#chkImageLibrary")[0].checked=!1;$("#"+chkRemoveFont)[0].checked=!1}function getAttribute(n){clearAttributeForm();Spend_Management.svcCustomEntities.getAttribute(CurrentUserInfo.AccountID,entityid,n,getAttributeComplete)}function getAttributeComplete(n){var f,i,e,r,o,s,h,u,t;for(editMode=!0,$g("divAttributeSectionHeader").innerHTML="Attribute: "+n.displayname,$g(txtattributenameid).value=n.displayname,$g(txtattributedescriptionid).value=n.description,$g(txtattributetooltipid).value=n.tooltip,$g(chkattributemandatoryid).checked=n.mandatory,$g(chkDisplayInMobile).checked=n.DisplayInMobile,$("#"+chkattributebuiltinid).prop("checked",n.BuiltIn),$("#"+encrypt).prop("checked",n.Encrypted),$("#"+encrypt).attr("disabled",!1),attributeEncrypted=n.Encrypted,attributeEncrypted&&$("#"+encrypt).attr("disabled",!0),CurrentUserInfo.AdminOverride&&$("#"+chkattributebuiltinid).prop("disabled",!1),n.BuiltIn&&$("#"+chkattributebuiltinid).prop("disabled",!0),f=$g(auditidentifierid),f.checked=n.isauditidentifer,f.disabled=f.checked?!0:!1,$g(isuniqueid).checked=n.isunique,i=$g(cmbattributetypeid),i.disabled=!0,t=0;t<i.options.length;t++)if(i.options[t].value==n.fieldtype){i.selectedIndex=t;showFurtherAttributeOptions();break}switch(n.fieldtype){case 1:e=$g(cmbtextformatid);o=$g(cmbDisplayWidthID);n.format===SEL.CustomEntityAdministration.Forms.Format.MultiLine?e.selectedIndex=2:(e.selectedIndex=1,o.selectedIndex=n.format==SEL.CustomEntityAdministration.Forms.Format.SingleLineWide?2:1);ShowDisplayWidthOptions("text",!1);n.maxlength!=null&&($g(txtmaxlengthid).value=n.maxlength);$g(txtmaxlengthid).disabled=!0;e.disabled=!0;break;case 3:for(r=$g(cmbdateformatid),t=0;t<r.options.length;t++)if(r.options[t].value==n.format){r.selectedIndex=t;break}r.disabled=!0;break;case 4:case 17:n.fieldtype==4&&(o=$g(cmbDisplayWidthID),o.selectedIndex=n.format==SEL.CustomEntityAdministration.Forms.Format.ListWide?2:1);Spend_Management.svcCustomEntities.getListItems(entityid,n.attributeid,getListItemsComplete,WebServiceError);break;case 5:for(s=$g(cmbdefaultvalueid),t=0;t<s.options.length;t++)if(s.options[t].value==n.defaultvalue){s.selectedIndex=t;break}break;case 7:h=$g(txtprecisionid);n.precision!=null&&(h.value=n.precision);h.disabled=!0;ValidatorEnable($g(reqPrecision),!1);break;case 10:for(u=$g(cmbtextformatlargeid),t=0;t<u.options.length;t++)if(u.options[t].value==n.format){u.selectedIndex=t;u.disabled=!0;break}n.maxlength!=null&&($g(txtmaxlengthlargeid).value=n.maxlength);$g(txtmaxlengthlargeid).disabled=!0;$("#"+chkRemoveFont)[0].checked=n.BoolAttribute;break;case 19:n.commentText!==""&&($g(txtAdviceText).value=n.commentText);break;case 22:$("#chkImageLibrary")[0].checked=n.BoolAttribute;break;case 23:$("#"+cmbcontactformatid).val(n.format).prop("disabled",!0)}ToggleMaxLengthDropDown(!0);n.fieldtype!=19?Spend_Management.svcCustomEntities.IsCustomEntityAttributeUniqueInInstances(entityid,attributeid,ConfirmAttributeInstancesUniqueComplete,UniqueError):ConfirmAttributeInstancesUniqueComplete(!1)}function ConfirmAttributeInstancesUniqueComplete(n){var t=$g(isuniqueid);t.disabled=n==!0?!1:!0;showAttributeModal()}function UniqueError(){SEL.MasterPopup.ShowMasterPopup("An error has been encountered evaluating the uniqueness of this attribute in existing instances.","Message from "+moduleNameHTML)}function getListItemsComplete(n){for(var i=null,r=[],t=0;t<n.length;t=t+1)i=JSON.parse(n[t]),r[t]=i;$("#"+lstitemsid).data(lstitemsid,r);showListItems(-1);ShowDisplayWidthOptions("list",!1)}function showListItems(n){var e=$("#"+lstitemsid).data(lstitemsid),t="",i=null,f=$g(lstitemsid),r,u;for(f.options.length=0,r=0;r<e.length;r++)u=document.createElement("OPTION"),i=e[r],t=i.elementText,i.Archived&&(t=t+" (Archived)"),u.text=t,u.value=i.elementValue,f.options.add(u);n!==-1&&(f.selectedIndex=n)}function showFurtherAttributeOptions(n){SEL.CustomEntityAdministration.Base.RemoveAllShortCuts();n===undefined&&($g("divTextOptions").style.display="none",$g("divLargeTextOptions").style.display="none",$g("divDateOptions").style.display="none",$g("divTickboxOptions").style.display="none",$g("divListOptions").style.display="none",$g("divDecimalOptions").style.display="none",$g("divWorkflowOptions").style.display="none",$g("divAdviceText").style.display="none",$g("divDisplayWidthOptions").style.display="none",$g("audit_row").style.display="",$g(chkattributemandatoryid).disabled=!1,$g("divImageLibrary").style.display="none");showGeneralFieldsOnAttributeModal();clearAdvancedAttributeDetails();DisableAttributeValidators()}function ToggleMaxLengthDropDown(n){var t=$g(cmbtextformatlargeid),i=t.options[t.selectedIndex].text;i==="Formatted Text Box"?n===!0?($("#maxLengthArea").css("display","none"),$(".stripFont").fadeIn(200)):($("#maxLengthArea").fadeOut(200),$(".stripFont").fadeIn(200)):($("#maxLengthArea").fadeIn(200),$(".stripFont").css("display","none"))}function showGeneralFieldsOnAttributeModal(){$g(chkattributemandatoryid).disabled=!1;$("[attributeelement=slideDown]").each(function(){$(this).css("display")==="none"&&$(this).slideDown(200)});$("[attributeelement=slideUp]").each(function(){$(this).css("display")!=="none"&&$(this).slideUp(200)});$("div:animated").length!==0?setTimeout("showSpecificFieldsOnAttributeModal()",400):showSpecificFieldsOnAttributeModal()}function showSpecificFieldsOnAttributeModal(){var n=$g(cmbattributetypeid),t=n.options[n.selectedIndex].value,i;t!=="19"&&$("#divAdviceText").slideUp(200);$(".encrypt").hide();switch(t){case"1":$("#divTextOptions").slideDown(200,function(){ShowDisplayWidthOptions("text",!1);$(".encrypt").show()});break;case"4":case"17":$("#divListOptions").slideDown(200,function(){ShowDisplayWidthOptions("list",!1);SEL.CustomEntityAdministration.Base.AddShortCuts("listAttribute");$("#"+encrypt).attr("checked",!1)});i=[];$("#"+lstitemsid).data(lstitemsid,i);break;case"5":$("#divDisplayWidthOptions").slideUp(200);$("#divTickboxOptions").slideDown(200);$("#"+encrypt).attr("checked",!1);break;case"3":$("#divDisplayWidthOptions").slideUp(200);$("#divDateOptions").slideDown(200);$("#"+encrypt).attr("checked",!1);break;case"7":$("#divDecimalOptions").slideDown(200);$("#"+encrypt).attr("checked",!1);break;case"10":$("#divLargeTextOptions").slideDown(200);$(".encrypt").show();break;case"11":$("#divWorkflowOptions").slideDown(200);$("#"+encrypt).attr("checked",!1);break;case"19":$("#divtooltip").css("position","inherit").slideUp(200);$("#audit_row").css("display","none");$("#divAdviceText").slideDown(200,function(){var n=$g(chkattributemandatoryid);n.checked=!1;n.disabled=!0;$g(auditidentifierid).checked=!1;$g(auditidentifierid).disabled=!1;$g(isuniqueid).checked=!1;$("#"+encrypt).attr("checked",!1)});break;case"22":$("#divtooltip").css("position","inherit").slideUp(200);$("#audit_row").css("display","none");$g(auditidentifierid).checked=!1;$g(isuniqueid).checked=!1;$("#divImageLibrary").slideDown(200,function(){$("#"+encrypt).attr("checked",!1)});break;case"23":$("#divContactOptions").css("position","inherit").slideDown(200);$(".encrypt").show()}}function DisableAttributeValidators(){ValidatorEnable($g(cmpSingleLineMaxLength),!1);ValidatorEnable($g(reqPrecision),!1);ValidatorEnable($g(cmpPrecision1),!1);ValidatorEnable($g(cmpPrecision2),!1);ValidatorEnable($g(custAttListItem),!1);ValidatorEnable($g(reqTextFormat),!1);ValidatorEnable($g(reqDefaultYesNo),!1);ValidatorEnable($g(reqDisplayWidth),!1);ValidatorEnable($g(reqLargeTextFormat),!1);ValidatorEnable($g(reqDateFormat),!1);ValidatorEnable($g(reqComment),!1)}function EnableAttributeValidators(n){var t,i,r;if(n=="normal"){t=$g(cmbattributetypeid);i=t.options[t.selectedIndex].value;switch(i){case"1":ValidatorEnable($g(reqTextFormat),!0);r=$g(cmbtextformatid);r.selectedIndex==1?(ValidatorEnable($g(reqDisplayWidth),!0),ValidatorEnable($g(cmpSingleLineMaxLength),!0)):(ValidatorEnable($g(reqDisplayWidth),!1),ValidatorEnable($g(cmpSingleLineMaxLength),!1));break;case"5":ValidatorEnable($g(reqDefaultYesNo),!0);break;case"4":case"17":ValidatorEnable($g(custAttListItem),!0);ValidatorEnable($g(reqDisplayWidth));break;case"3":$g("divDateOptions").style.display="";ValidatorEnable($g(reqDateFormat));break;case"7":ValidatorEnable($g(reqPrecision),!0);ValidatorEnable($g(cmpPrecision1),!0);ValidatorEnable($g(cmpPrecision2),!0);break;case"10":ValidatorEnable($g(reqLargeTextFormat),!0);break;case"19":ValidatorEnable($g(reqComment),!0);break;case"23":ValidatorEnable($g(reqContactFormat),!0)}}}function ShowDisplayWidthOptions(n,t){t&&FireDropdownValidatorWhenNoneSelected(cmbtextformatid,reqTextFormat);$("#divDisplayWidthOptions").stop(!0,!0);switch(n){case"text":var i=$g(cmbtextformatid,reqTextFormat);i.options[i.selectedIndex].value=="1"?$("#divDisplayWidthOptions").slideDown(200):$("#divDisplayWidthOptions").css("display")!=="none"&&$("#divDisplayWidthOptions").slideUp(200);break;case"list":$("#divDisplayWidthOptions").slideDown(200)}return}function showListItemModal(n){listItemEditMode=n;n?SEL.Common.Page_ClientValidateReset():($g("divListItem").innerHTML="New List Item",$g(txtlistitemid).value="",$g(chkarchiveitemid).checked=!1);SEL.Common.ShowModal(modlistitemid);$("#"+txtlistitemid).select()}function hideListItemModal(){SEL.Common.Page_ClientValidateReset();SEL.Common.HideModal(modlistitemid)}function editListItem(){var t=$g(lstitemsid),r=$("#"+lstitemsid).data(lstitemsid),n,i;t.selectedIndex!=-1?(n=r[t.selectedIndex],$g(txtlistitemid).value=n.elementText,$g(chkarchiveitemid).checked=n.Archived,$g("divListItem").innerHTML="List Item: "+n.elementText,showListItemModal(!0)):(i="Please select an item in the list to edit.",t.length==0&&(i="There are no items in the list to edit."),SEL.MasterPopup.ShowMasterPopup(i,"Message from "+moduleNameHTML))}function EntityListItem(){this.elementValue=0;this.elementText="";this.elementOrder=0;this.Archived=!1}function addListItem(){var n,h,u,f,r;if(validateform("vgAttributeListItem")==!1)return!1;n=$("#"+lstitemsid).data(lstitemsid);typeof n=="undefined"&&(n=[]);var t=$g(txtlistitemid).value,e=$g(chkarchiveitemid).checked,o=$g(lstitemsid).selectedIndex,s=!1,c=$g(lstitemsid).options;for(i=0;i<c.length;i++)if(h=n[i],h.elementText===t){s=!0;break}if(listItemEditMode){if(u=n[o],s&&t!=u.elementText){SEL.MasterPopup.ShowMasterPopup("This value is already in the list.","Message from "+moduleNameHTML);return}u.elementText=t;u.Archived=e;e&&(t=t+" (Archived)");n[o]=u;$("#"+lstitemsid).data(lstitemsid,n);r=$g(custAttListItem);r.isvalid=!0;ValidatorUpdateDisplay(r);hideListItemModal();showListItems(o)}else s?SEL.MasterPopup.ShowMasterPopup("This value is already in the list.","Message from "+moduleNameHTML):(f=new EntityListItem,f.elementText=t,f.Archived=e,f.elementValue=0,n.push(f),$("#"+lstitemsid).data(lstitemsid,n),r=$g(custAttListItem),r.isvalid=!0,ValidatorUpdateDisplay(r),hideListItemModal(),showListItems(-1));return}function removeListItem(){var n=$g(lstitemsid),r,t,i;n.selectedIndex!=-1?(r=$("#"+lstitemsid).data(lstitemsid),t=r[n.selectedIndex].elementValue,t===0?removeListItemComplete(0):Spend_Management.svcCustomEntities.CheckListItemIsNotUsedWithinFilter(entityid,attributeid,t,removeListItemComplete)):(i="Please select an item in the list to remove.",n.length==0&&(i="There are no items in the list to remove."),SEL.MasterPopup.ShowMasterPopup(i,"Message from "+moduleNameHTML))}function removeListItemComplete(n){if(n===0){var t=$("#"+lstitemsid).data(lstitemsid),i=$g(lstitemsid),r=t.splice(i.selectedIndex,1);$("#"+lstitemsid).data(lstitemsid,t);showListItems(-1)}else SEL.MasterPopup.ShowMasterPopup("This list item cannot be removed as it is in use on a GreenLight View Filter.","Message from "+moduleNameHTML)}function SwitchValidator(n,t){validator=$g(n);validator.isvalid=t;ValidatorUpdateDisplay(validator);return}function ValidateButtonText(n,t){var o=$g(txtformsavebuttontextid),s=$g(txtformsaveandduplicatebuttontextid),h=$g(txtformsaveandstaybuttontextid),c=$g(txtformcancelbuttontextid),l=$g(txtformsaveandnewbuttontextid);t.IsValid=o.value.replace(" ","")!=""||s.value.replace(" ","")!=""||h.value.replace(" ","")!=""||c.value.replace(" ","")!=""||l.value.replace(" ","")!="";var i=$g(lblsavebuttontextid),r=$g(lblsaveandduplicatebuttontextid),u=$g(lblsaveandstaybuttontextid),f=$g(lblsaveandnewbuttontextid),e=$g(lblcancelbuttontextid);t.IsValid?(i.className="",r.className="",u.className="",f.className="",e.className="",i.innerHTML=i.innerHTML.replace("*",""),r.innerHTML=r.innerHTML.replace("*",""),u.innerHTML=u.innerHTML.replace("*",""),f.innerHTML=f.innerHTML.replace("*",""),e.innerHTML=e.innerHTML.replace("*",""),SwitchValidator(cvTextSaveID,!0),SwitchValidator(cvTextSaveAndDuplicateID,!0),SwitchValidator(cvTextSaveAndStayID,!0),SwitchValidator(cvTextCancelID,!0),SwitchValidator(cvTextSaveAndNewID,!0)):(i.className="mandatory",r.className="mandatory",u.className="mandatory",f.className="mandatory",e.className="mandatory",i.innerHTML.indexOf("*")<=0&&(i.innerHTML=i.innerHTML+"*",r.innerHTML=r.innerHTML+"*",u.innerHTML=u.innerHTML+"*",f.innerHTML=f.innerHTML+"*",e.innerHTML=e.innerHTML+"*"),SwitchValidator(cvTextSaveID,!1),SwitchValidator(cvTextSaveAndDuplicateID,!1),SwitchValidator(cvTextSaveAndStayID,!1),SwitchValidator(cvTextCancelID,!1),SwitchValidator(cvTextSaveAndNewID,!1))}function deleteEntity(n){currentRowID=n;confirm("Are you sure you wish to delete the selected GreenLight?\n\nPlease note once this GreenLight has been deleted, ALL RECORDS entered by users for this GreenLight will be permanently deleted and cannot be retrieved.\n\nThis action is NOT reversible.")&&Spend_Management.svcCustomEntities.DeleteEntity(CurrentUserInfo.AccountID,n,function(n){n==0?SEL.Grid.refreshGrid("gridEntities",SEL.Grid.getCurrentPageNum("gridEntities")):n===-1?SEL.MasterPopup.ShowMasterPopup("The delete request was denied as a 1:n relationship to this GreenLight exists.","Message from "+moduleNameHTML):n===-2?SEL.MasterPopup.ShowMasterPopup("The delete request was aborted as the GreenLight could not be found.","Message from "+moduleNameHTML):n===-3?SEL.MasterPopup.ShowMasterPopup("You do not have permission to delete GreenLights.","Message from "+moduleNameHTML):n===-4?SEL.MasterPopup.ShowMasterPopup("The delete request was denied as a n:1 relationship references this GreenLight.","Message from "+moduleNameHTML):n===-5?SEL.MasterPopup.ShowMasterPopup("The delete request was denied as an attribute is used by a n:1 relationship, report or UDF.","Message from "+moduleNameHTML):n===-6&&SEL.MasterPopup.ShowMasterPopup("The delete request was denied as this GreenLight is a System GreenLight.","Message from "+moduleNameHTML)},WebServiceError);return}var currentAction,selectedViewID,listItemEditMode=!1,shallowSavePerformed=!1,attributeEncrypted=!1,editMode=!1;