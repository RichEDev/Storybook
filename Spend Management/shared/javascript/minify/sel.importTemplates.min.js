(function(){function n(){SEL.registerNamespace("SEL.ImportTemplates"),SEL.ImportTemplates={CurrentTemplateID:null,TemplateNameDomID:null,ApplicationTypeDomID:null,TrustDomID:null,TabsDomID:null,CurrentFieldsDropdownDomID:null,CurrentTableSelectionID:null,CurrentDefaultTableName:null,CurrentInitialMappingFieldID:null,CurrentDefaultMappingFieldID:null,SaveImportTemplateMappings:function(){if(SEL.Common.ValidateForm()!==!1){var i=$g(SEL.ImportTemplates.TemplateNameDomID).value,r=parseInt($g(SEL.ImportTemplates.ApplicationTypeDomID).value,10),u=parseInt($g(SEL.ImportTemplates.TrustDomID).value,10),f=$("#"+SEL.ImportTemplates.TabsDomID).find("table"),n=Array(),t=!1;f.each(function(i,r){var e=r.id,a=e.split("_"),o,s;for(e=a[a.length-1],o=[],s=1;s<r.rows.length;s++){var u=[],h=r.rows[s],f=h.cells[0],c=h.cells[2],v=h.cells[3],y=f.innerText,p=parseInt(f.childNodes[1].value,10),l=c.childNodes[0].value,w=c.childNodes[0].selectedIndex,b=f.childNodes[2].value,k=parseInt(f.childNodes[3].value,10),d=f.childNodes[4].value,g=f.childNodes[5].value,nt=f.childNodes[6].value,tt=f.childNodes[7].value,it=f.childNodes[8].value,rt=v.childNodes[0].childNodes[0].checked;if(!SEL.ImportTemplates.CheckForDuplicateFields(o,l)){SEL.MasterPopup.ShowMasterPopup('Database field "'+c.childNodes[0][w].text+'" on '+e+" Tab has been mapped more than once.","Message from "+moduleNameHTML),t=!0;return}u.push(e),u.push(p),u.push(y),u.push(l),u.push(b),u.push(k),u.push(d),u.push(g),u.push(nt),u.push(tt),u.push(it),u.push(rt),l!=="0"&&o.push(u)}n.push(o)}),t||Spend_Management.svcImportTemplates.SaveImportTemplateMappings(SEL.ImportTemplates.CurrentTemplateID,i,r,u,1,n,SEL.ImportTemplates.SaveImportTemplateMappingsComplete,SEL.ImportTemplates.errorMessage);return}},SaveImportTemplateMappingsComplete:function(n){n<=0?SEL.MasterPopup.ShowMasterPopup("There was an error adding your template mapping."):window.location=appPath+"/shared/ImportsExports/importTemplates.aspx"},CancelImportTemplateMapping:function(){window.location=appPath+"/shared/ImportsExports/importTemplates.aspx"},errorMessage:function(n){typeof n._message!="undefined"?SEL.MasterPopup.ShowMasterPopup(n._message):SEL.MasterPopup.ShowMasterPopup(n)},ToggleFieldImportFlags:function(n){if(typeof n=="undefined"||n===null){SEL.MasterPopup.ShowMasterPopup("Invalid Object Reference");return}var t=n.checked;$(n).parentsUntil("table").find("input[type=checkbox]").each(function(n,i){i.checked=t})},LoadFields:function(n,t,i,r,u){var f,e;if(SEL.ImportTemplates.CurrentDefaultTableID=i,SEL.ImportTemplates.CurrentInitialMappingFieldID=r,SEL.ImportTemplates.CurrentDefaultMappingFieldID=u,typeof n=="undefined"||n===null){SEL.MasterPopup.ShowMasterPopup("Invalid Object Reference");return}if(f=$(n).parentsUntil("table").contents("td").eq(2).find("select"),SEL.ImportTemplates.CurrentFieldsDropdownDomID=f.attr("id"),SEL.ImportTemplates.CurrentTableSelectionID=n.options[n.selectedIndex].value,n.value==="0"){f.empty(),f.append($("<option><\/option>").attr("value","0").text("[None]")),f.attr("disabled","disabled");return}e=n.options[n.selectedIndex].value,Spend_Management.svcImportTemplates.GetTableFields(e,t,!0,!0,SEL.ImportTemplates.LoadFieldsComplete,SEL.ImportTemplates.errorMessage)},LoadFieldsComplete:function(n){var t=$("#"+SEL.ImportTemplates.CurrentFieldsDropdownDomID);t.empty(),t.append($("<option><\/option>").attr("value","0").text("[None]")),$.each(n,function(){t.append($("<option><\/option>").attr("value",this.FieldID).text(this.Description))}),SEL.ImportTemplates.CurrentTableSelectionID==SEL.ImportTemplates.CurrentDefaultTableID?t.attr("disabled","disabled"):t.removeAttr("disabled"),SEL.ImportTemplates.SetSelectedItem(t[0],SEL.ImportTemplates.CurrentInitialMappingFieldID,SEL.ImportTemplates.CurrentDefaultMappingFieldID)},CheckForDuplicateFields:function(n,t){for(var r=!0,i=0;i<n.length;i++)if(n[i][3]===t){r=!1;break}return r},SetSelectedItem:function(n,t,i){for(var u=-1,f=0,r=0;r<n.options.length;r++)n.options[r].value===t&&(u=r),n.options[r].value==i&&(f=r);n.options.selectedIndex=u===-1?f:u}}}window.Sys&&Sys.loader?Sys.loader.registerScript("ImportTemplates",null,n):n()})();
//@ sourceMappingURL=sel.importTemplates.min.js.map