CREATE PROCEDURE [dbo].[APIgetEsrAssignments]
	@esrAssignID int 
	
AS
BEGIN
	IF @esrAssignID = 0
	BEGIN
			SELECT [employeeid]
		  ,[AssignmentID]
		  ,[AssignmentNumber]
		  ,[EarliestAssignmentStartDate]
		  ,[FinalAssignmentEndDate]
		  ,[AssignmentStatus]
		  ,[PayrollPayType]
		  ,[PayrollName]
		  ,[PayrollPeriodType]
		  ,[AssignmentAddressLine1]
		  ,[AssignmentAddressLine2]
		  ,[AssignmentAddressTown]
		  ,[AssignmentAddressCounty]
		  ,[AssignmentAddressPostcode]
		  ,[AssignmentAddressCountry]
		  ,[SupervisorFlag]
		  ,[SupervisorAssignmentNumber]
		  ,[SupervisorEmployeeNumber]
		  ,[SupervisorFullName]
		  ,[AccrualPlan]
		  ,[EmployeeCategory]
		  ,[AssignmentCategory]
		  ,[PrimaryAssignment]
		  ,[PrimaryAssignmentString]
		  ,[NormalHours]
		  ,[NormalHoursFrequency]
		  ,[GradeContractHours]
		  ,[NoOfSessions]
		  ,[SessionsFrequency]
		  ,[WorkPatternDetails]
		  ,[WorkPatternStartDay]
		  ,[FlexibleWorkingPattern]
		  ,[AvailabilitySchedule]
		  ,[Organisation]
		  ,[LegalEntity]
		  ,[PositionName]
		  ,[JobRole]
		  ,[OccupationCode]
		  ,[AssignmentLocation]
		  ,[Grade]
		  ,[JobName]
		  ,[Group]
		  ,[TAndAFlag]
		  ,[NightWorkerOptOut]
		  ,[ProjectedHireDate]
		  ,[VacancyID]
		  ,[createdon]
		  ,[modifiedon]
		  ,[esrAssignID]
		  ,[Active]
		  ,[CreatedBy]
		  ,[ModifiedBy]
		  ,[ESRPersonId]
		  ,[AssignmentType]
		  ,[EffectiveStartDate]
		  ,[EffectiveEndDate]
		  ,[SystemAssignmentStatus]
		  ,[EmployeeStatusFlag]
		  ,[ESRLocationId]
		  ,[SupervisorPersonId]
		  ,[SupervisorAssignmentId]
		  ,[DepartmentManagerAssignmentId]
		  ,[FTE]
		  ,[ESROrganisationId]
		  ,[ESRPositionId]
		  ,[GradeStep]
		  ,[StartDateInGrade]
		  ,[AnnualSalaryValue]
		  ,[ContractEndDate]
		  ,[IncrementDate]
		  ,[MaximumPartTimeFlag]
		  ,[AFCFlag]
		  ,[ESRLastUpdate]
		  ,[LastWorkingDay]
		  ,[eKSFSpinalPoint]
		  ,[ManagerFlag]
		  ,[SupervisorEsrAssignID]
		  ,[SignOffOwner]
	  FROM [dbo].[esr_assignments]

	END
ELSE
	BEGIN
				SELECT [employeeid]
		  ,[AssignmentID]
		  ,[AssignmentNumber]
		  ,[EarliestAssignmentStartDate]
		  ,[FinalAssignmentEndDate]
		  ,[AssignmentStatus]
		  ,[PayrollPayType]
		  ,[PayrollName]
		  ,[PayrollPeriodType]
		  ,[AssignmentAddressLine1]
		  ,[AssignmentAddressLine2]
		  ,[AssignmentAddressTown]
		  ,[AssignmentAddressCounty]
		  ,[AssignmentAddressPostcode]
		  ,[AssignmentAddressCountry]
		  ,[SupervisorFlag]
		  ,[SupervisorAssignmentNumber]
		  ,[SupervisorEmployeeNumber]
		  ,[SupervisorFullName]
		  ,[AccrualPlan]
		  ,[EmployeeCategory]
		  ,[AssignmentCategory]
		  ,[PrimaryAssignment]
		  ,[PrimaryAssignmentString]
		  ,[NormalHours]
		  ,[NormalHoursFrequency]
		  ,[GradeContractHours]
		  ,[NoOfSessions]
		  ,[SessionsFrequency]
		  ,[WorkPatternDetails]
		  ,[WorkPatternStartDay]
		  ,[FlexibleWorkingPattern]
		  ,[AvailabilitySchedule]
		  ,[Organisation]
		  ,[LegalEntity]
		  ,[PositionName]
		  ,[JobRole]
		  ,[OccupationCode]
		  ,[AssignmentLocation]
		  ,[Grade]
		  ,[JobName]
		  ,[Group]
		  ,[TAndAFlag]
		  ,[NightWorkerOptOut]
		  ,[ProjectedHireDate]
		  ,[VacancyID]
		  ,[createdon]
		  ,[modifiedon]
		  ,[esrAssignID]
		  ,[Active]
		  ,[CreatedBy]
		  ,[ModifiedBy]
		  ,[ESRPersonId]
		  ,[AssignmentType]
		  ,[EffectiveStartDate]
		  ,[EffectiveEndDate]
		  ,[SystemAssignmentStatus]
		  ,[EmployeeStatusFlag]
		  ,[ESRLocationId]
		  ,[SupervisorPersonId]
		  ,[SupervisorAssignmentId]
		  ,[DepartmentManagerAssignmentId]
		  ,[FTE]
		  ,[ESROrganisationId]
		  ,[ESRPositionId]
		  ,[GradeStep]
		  ,[StartDateInGrade]
		  ,[AnnualSalaryValue]
		  ,[ContractEndDate]
		  ,[IncrementDate]
		  ,[MaximumPartTimeFlag]
		  ,[AFCFlag]
		  ,[ESRLastUpdate]
		  ,[LastWorkingDay]
		  ,[eKSFSpinalPoint]
		  ,[ManagerFlag]
		  ,[SupervisorEsrAssignID]
		  ,[SignOffOwner]
	  FROM [dbo].[esr_assignments]
	  WHERE esrAssignID = @esrAssignID

	END
END